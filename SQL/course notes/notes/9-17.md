

# æŸ¥è¯¢è¯­è¨€ä¸å…³ç³»ä»£æ•°ï¼ˆQuery Languages for Relational DBï¼‰

## æ•°æ®åº“æ“ä½œï¼ˆOperations on DBï¼‰
1. **queries**ï¼šä»æ•°æ®åº“è¯»å–æ•°æ® (**æŸ¥è¯¢**)  
2. **updates**ï¼šä¿®æ”¹æ•°æ®åº“å†…å®¹ (**æ›´æ–°**)  

- **Formal query languageï¼ˆå½¢å¼åŒ–æŸ¥è¯¢è¯­è¨€ï¼‰**ï¼š**Relational Algebraï¼ˆå…³ç³»ä»£æ•°ï¼‰**  
- **Relational algebra** æ˜¯ä¸€ç§ **è¿‡ç¨‹åŒ–è¯­è¨€ (procedural language)**ï¼š  
  æŸ¥è¯¢ç”± **è¿ç®—ç¬¦ (operators)** åº”ç”¨äº **å…³ç³» (relations)** æ„æˆä»£æ•°è¡¨è¾¾å¼ï¼Œè¡¨ç¤ºå¾—åˆ°ç»“æœçš„æ­¥éª¤ã€‚  
- åç»­ä¼šå­¦ä¹  **SQL**ï¼šä¸€ç§ç”¨äºæŸ¥è¯¢å’Œæ›´æ–°çš„å®ç”¨è¯­è¨€ã€‚  

---

## å…³ç³»ä»£æ•°ï¼ˆRelational Algebraï¼‰

### äº”ç§åŸºæœ¬æ“ä½œï¼ˆ5 basic operationsï¼‰
1. **Unionï¼ˆå¹¶é›†ï¼‰**  
2. **Differenceï¼ˆå·®é›†ï¼‰**  
3. **Cartesian Productï¼ˆç¬›å¡å°”ç§¯ï¼‰**  
4. **Projectionï¼ˆæŠ•å½±ï¼‰**  
5. **Selectionï¼ˆé€‰æ‹©ï¼‰**  

- è¿™äº”ç§æ“ä½œ **å®Œå…¨å®šä¹‰** äº†å…³ç³»ä»£æ•°ã€‚  
- **æ¯ä¸ªæ“ä½œçš„ç»“æœä»ç„¶æ˜¯å…³ç³»**ï¼ˆé—­åŒ…æ€§è´¨ closure propertyï¼‰ã€‚  
- è¿˜æœ‰ä¸€äº› **æ´¾ç”Ÿæ“ä½œï¼ˆderived operationsï¼‰**ï¼Œç”±åŸºæœ¬æ“ä½œç»„åˆè€Œæˆï¼Œä¸å¢åŠ è¡¨è¾¾èƒ½åŠ›ï¼Œä½†æ›´æ–¹ä¾¿ã€‚  
  - æœ€é‡è¦çš„æ´¾ç”Ÿæ“ä½œï¼š**Joinï¼ˆè¿æ¥ï¼‰**  
  - **Renamingï¼ˆé‡å‘½åï¼‰**ï¼šä¿®æ”¹å±æ€§åã€‚  

---

## å¹¶é›†ï¼ˆUnionï¼‰
- **R âˆª S**ï¼šå±äº R æˆ– S æˆ–åŒæ—¶å±äºä¸¤è€…çš„å…ƒç»„é›†åˆã€‚  
- å‰æï¼šR å’Œ S **åº¦ï¼ˆdegreeï¼‰ç›¸åŒ**ï¼Œä¸”å¯¹åº”å±æ€§ **ç±»å‹å…¼å®¹**ã€‚  
- å¦‚æœå±æ€§åä¸åŒï¼Œç»“æœå…³ç³»é»˜è®¤é‡‡ç”¨ **R çš„å±æ€§å**ï¼ˆé™¤éé‡å‘½åï¼‰ã€‚  
- **å»é‡**ï¼šé‡å¤å…ƒç»„è¢«æ¶ˆé™¤ã€‚  
- è¿”å›å…³ç³»çš„åº¦ä¸åŸå…³ç³»ç›¸åŒã€‚  

---

## å·®é›†ï¼ˆDifferenceï¼‰
- **R âˆ’ S**ï¼šåœ¨ R ä¸­ä½†ä¸åœ¨ S ä¸­çš„å…ƒç»„é›†åˆã€‚  
- æ¡ä»¶ä¸å¹¶é›†ç›¸åŒï¼šåº¦ç›¸åŒï¼Œå±æ€§å…¼å®¹ã€‚  
- è¿”å›å…³ç³»çš„åº¦ä¸åŸå…³ç³»ç›¸åŒã€‚  

---

## ç¬›å¡å°”ç§¯ï¼ˆCartesian Productï¼‰
- **R Ã— S**ï¼šå¦‚æœ R çš„åº¦ä¸º k1ï¼ŒS çš„åº¦ä¸º k2ï¼Œåˆ™ç»“æœå…³ç³»åº¦ä¸º k1+k2ã€‚  
- æ¯ä¸ªå…ƒç»„å‰ k1 ä¸ªåˆ†é‡æ¥è‡ª Rï¼Œå k2 ä¸ªåˆ†é‡æ¥è‡ª Sã€‚  
- å±æ€§å‘½åï¼šå‰ k1 ä¸ªä¸º R çš„å±æ€§åï¼Œå k2 ä¸ªä¸º S çš„å±æ€§åã€‚  
- å¯¹ä¸¤è¡¨çš„å±æ€§å’Œåº¦æ²¡æœ‰ä»»ä½•è¦æ±‚ï¼Œå¦‚æœæœ‰åŒåå±æ€§ï¼Œå¿…é¡»è¿›è¡Œ **é‡å‘½å**ã€‚ 

---

## æŠ•å½±ï¼ˆProjection = å‚ç›´åˆ†è§£ï¼‰
- **Ï€A1,A2,...,Am(R)**ï¼šè¿”å›åªåŒ…å«æŒ‡å®šå±æ€§å­é›† {A1...Am} çš„å…³ç³»ã€‚  
- ç»“æœå…³ç³»çš„åº¦ä¸º mã€‚  
- æŒ‰æŒ‡å®šé¡ºåºæ’åˆ—å±æ€§ã€‚  

---

## é€‰æ‹©ï¼ˆSelection = æ°´å¹³åˆ†è§£ï¼‰
- **ÏƒF(R)**ï¼šåœ¨å…³ç³» R ä¸Šé€‰æ‹©æ»¡è¶³è°“è¯ F çš„å…ƒç»„ã€‚  
- è°“è¯ F å¯ä»¥æ˜¯ï¼š  
  - ç®€å•è°“è¯ï¼š  
    - A op å¸¸é‡  
    - A op A'ï¼ˆä¸¤ä¸ªå±æ€§æ¯”è¾ƒï¼‰  
  - å¸ƒå°”ç»„åˆï¼š  
    - AND (âˆ§)ã€OR (âˆ¨)ã€NOT (Â¬)  
- è¿”å›å…³ç³»çš„åº¦ä¸åŸå…³ç³»ç›¸åŒã€‚  
- è‹¥æ— å…ƒç»„æ»¡è¶³ï¼Œè¿”å›ç©ºå…³ç³»ï¼ˆâˆ…ï¼‰ã€‚  

---

## é‡å‘½åï¼ˆRenamingï¼‰
- **ÏA1,â€¦,Am â† B1,â€¦,Bm(R)**ï¼šå°† R ä¸­å±æ€§ Ai é‡å‘½åä¸º Biã€‚  
- ç”¨é€”ï¼šè§£å†³å±æ€§é‡åé—®é¢˜ã€‚  
- ä¾‹å­ï¼š  
  - R(Name, Surname, City)ï¼ŒS(Code, Name)  
  - ç¬›å¡å°”ç§¯å‰å¿…é¡»é‡å‘½åï¼š  
    - Ï(Name â† StudentName)(R) Ã— S  
  - ç»“æœæ¨¡å¼ï¼š (StudentName, Surname, City, Code, Name)  

---

## ä¾‹å­ï¼ˆExamplesï¼‰

- **Q1**ï¼šæŸ¥æ‰¾å·¥èµ„å¤§äº 2000 çš„å‘˜å·¥å§“å  
  ```text
  Ï€Name(ÏƒSalary > 2000(EMPLOYEES))
````

* **Q2**ï¼šæŸ¥æ‰¾å·¥èµ„å¤§äº 2000 ä¸”èŒä½ä¸º engineer çš„å‘˜å·¥å§“åå’Œéƒ¨é—¨å·

  ```text
  Ï€Name,Dept#(ÏƒSalary > 2000 âˆ§ Job='engineer'(EMPLOYEES))
  ```

* **Q3**ï¼šæŸ¥æ‰¾åœ¨éƒ¨é—¨ 30 ä¸”èŒä½ä¸º engineer æˆ– technician çš„å‘˜å·¥ç¼–å·

  ```text
  Ï€Emp#(ÏƒDept#=30 âˆ§ (Job='engineer' âˆ¨ Job='technician')(EMPLOYEES))
  ```

---

## ğŸ“˜ å…³é”®å­—ä¸­è‹±å¯¹ç…§

| è‹±æ–‡                  | ä¸­æ–‡       |
| ------------------- | -------- |
| Query Language      | æŸ¥è¯¢è¯­è¨€     |
| Relational Algebra  | å…³ç³»ä»£æ•°     |
| Procedural Language | è¿‡ç¨‹åŒ–è¯­è¨€    |
| Relation            | å…³ç³»       |
| Tuple               | å…ƒç»„       |
| Attribute           | å±æ€§       |
| Domain              | åŸŸ        |
| Schema              | æ¨¡å¼       |
| Union               | å¹¶é›†       |
| Difference          | å·®é›†       |
| Cartesian Product   | ç¬›å¡å°”ç§¯     |
| Projection          | æŠ•å½±ï¼ˆå‚ç›´åˆ†è§£ï¼‰ |
| Selection           | é€‰æ‹©ï¼ˆæ°´å¹³åˆ†è§£ï¼‰ |
| Predicate           | è°“è¯       |
| Join                | è¿æ¥       |
| Renaming            | é‡å‘½å      |
| Closure Property    | é—­åŒ…æ€§è´¨     |
| Derived Operation   | æ´¾ç”Ÿæ“ä½œ     |

```

